#coding: utf-8
module Robot
  class Proxy
    def initialize
      @count=0
      @values=[
              "168.63.150.60:3128",
              "95.6.59.17:80",
              "210.57.214.98:8080",
              "110.139.118.95:8080",
              "77.175.95.44:80",
              "203.128.68.146:8080",
              "156.154.112.47:80",
              "119.167.231.183:80",
              "118.195.65.247:80",
              "http://219.243.221.77:8080/",
              "http://202.43.188.6:8080/",
              "http://156.154.112.232:80/",
              "http://109.207.61.134:8090/",
              "http://210.211.125.25:3128/",
              "http://156.154.112.30:80/",
              "http://54.235.210.159:80/",
              "http://46.48.153.54:3128/",
              "http://221.210.5.30:8080/",
              "http://61.55.141.10:81/",
              "http://122.226.146.238:80/",
              "http://109.175.8.53:8080/",
              "http://71.61.84.216:8080/",
              "http://202.43.188.199:8080/",
              "http://190.41.70.37:8001/",
              "http://50.57.179.82:80/",
              "http://94.142.69.241:8080/",
              "http://190.249.189.183:8080/",
              "http://41.78.26.157:8080/",
              "http://111.68.104.132:8080/",
              "http://88.198.64.141:8118/",
              "http://109.207.61.149:8090/",
              "http://41.78.26.225:8080/",
              "http://115.182.10.144:80/",
              "http://119.254.84.90:80/",
              "http://78.130.136.2:8080/",
              "http://116.228.55.217:80/",
              "http://109.224.62.197:80/",
              "http://116.228.55.184:80/",
              "http://222.180.173.5:8080/",
              "http://190.102.30.19:80/",
              "http://85.185.149.31:80/",
              "http://219.150.204.30:80/",
              "http://82.200.164.226:3128/",
              "http://173.163.42.57:8080/",
              "http://78.130.136.18:8080/",
              "http://190.95.223.146:8080/",
              "http://120.203.215.14:80/",
              "http://218.201.21.177:80/",
              "http://190.128.170.18:8080/",
              "http://27.17.1.190:808/",
              "http://122.0.66.102:8080/",
              "http://195.22.240.18:80/",
              "http://80.112.143.48:80/",
              "http://207.62.34.40:8080/",
              "http://125.39.66.134:80/",
              "http://211.157.104.100:80/",
              "http://120.203.214.162:80/",
              "http://117.102.94.36:8080/",
              "http://118.97.46.98:8088/",
              "http://118.96.201.31:8080/"
          ]
    end
    def shift
      @values.shift
    end
    def get_proxy url
      prox=false
      proxy=nil
      while !prox
        proxy=self.shift
        puts proxy
        prox=self.verify?(proxy,url)
        puts prox
      end
      proxy
    end
    def verify?(proxy,google_url)
      ld=LoaderWatir.new(proxy)
      ps=NokoParser.new
      ld.goto(google_url)
      ps.document(ld.html)
      pg=ps.page
      sleep 120
      ld.close
      #if pg.title.to_s.strip=~/Google/
      #  true
      #else
      #  false
      #end
      ld=nil
      ps=nil
      true
    end
    attr_reader :values
    attr_accessor :count

  end
end